title = "HAZOP Schema"
version = "1.0"

# ====================
# Node Entities
# ====================

[node.hazop_study]
node_description = "A structured and systematic examination of a system or process to identify potential hazards and operability issues."
node_properties = [
  { name = "study_id", type = "string", optional = false, description = "Unique identifier for the HAZOP study" },
  { name = "system_scope", type = "string", optional = false, description = "System or process under analysis" },
  { name = "date", type = "string", optional = true, description = "Date the study was conducted" },
  { name = "team_lead", type = "string", optional = true, description = "Person responsible for leading the HAZOP" },
  { name = "reference_documents", type = "string", optional = true, description = "Supporting documents (e.g., P&IDs, procedures)" }
]

[node.hazop_node]
node_description = "A specific location or function in the system where deviations are analyzed (e.g., a valve, pump, or process step)."
node_properties = [
  { name = "node_id", type = "string", optional = false, description = "Identifier for the HAZOP node" },
  { name = "description", type = "string", optional = false, description = "Narrative of the node's function or location" }
]

[node.hazop_deviation]
node_description = "A deviation from design intent, typically defined by a guideword and process parameter (e.g., 'No Flow')."
node_properties = [
  { name = "guideword", type = "string", optional = false, description = "Guideword used (e.g., No, More, Less, Reverse)" },
  { name = "parameter", type = "string", optional = false, description = "Process variable (e.g., flow, pressure, temperature)" },
  { name = "deviation_description", type = "string", optional = true, description = "Explanation of the deviation" }
]

[node.hazop_cause]
node_description = "A condition or failure that could lead to the deviation."
node_properties = [
  { name = "cause_description", type = "string", optional = false, description = "Narrative of the cause" }
]

[node.hazop_consequence]
node_description = "The potential outcome or impact if the deviation occurs."
node_properties = [
  { name = "consequence_description", type = "string", optional = false, description = "Narrative of the consequence" },
  { name = "severity", type = "string", optional = true, description = "Qualitative or quantitative severity rating" }
]

[node.hazop_safeguard]
node_description = "An existing control or mitigation that reduces the likelihood or impact of the deviation."
node_properties = [
  { name = "safeguard_description", type = "string", optional = false, description = "Description of the safeguard" },
  { name = "type", type = "string", optional = true, description = "Type of safeguard (e.g., alarm, interlock, procedure)" }
]

[node.hazop_recommendation]
node_description = "A proposed action to address an identified hazard or operability issue."
node_properties = [
  { name = "recommendation_text", type = "string", optional = false, description = "Text of the recommendation" },
  { name = "status", type = "string", optional = true, description = "Implementation status (e.g., open, closed, in progress)" }
]

# ====================
# Relationships
# ====================

[relation.hazop_part_of_study]
relation_description = "Links a HAZOP node to the overall HAZOP study."
from_node = "hazop_node"
to_node = "hazop_study"

[relation.hazop_has_deviation]
relation_description = "Connects a HAZOP node to a deviation being analyzed."
from_node = "hazop_node"
to_node = "deviation"

[relation.hazop_caused_by]
relation_description = "Links a deviation to its potential cause."
from_node = "deviation"
to_node = "cause"

[relation.hazop_leads_to]
relation_description = "Links a deviation to its potential consequence."
from_node = "deviation"
to_node = "consequence"

[relation.hazop_mitigated_by]
relation_description = "Connects a consequence to an existing safeguard."
from_node = "consequence"
to_node = "safeguard"

[relation.hazop_recommendation_for]
relation_description = "Links a deviation or consequence to a recommendation."
from_node = "recommendation"
to_node = "deviation"
